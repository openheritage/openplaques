<script>
	$(function() {
		var availableTags = [{"label": "test", "value": "1"}];		
		$( "#area" ).autocomplete({
			source: '/areas.json' ,
			select: function(event, ui){
						$('#country').val(ui.item.country_name);
						$('#area_id').val(ui.item.id);
						$('#plaque_country').val(ui.item.country_id);						
					},
			delay: 10
		});
	});
	</script>


<p>Thanks for spotting a plaque!</p>

<% if params[:checked] && params[:checked] == "true" %>

	<%= form_for(@plaque) do |f| %>

		<div><p><%= f.label :inscription, "Please type in the transcription on the plaque" %>:</p> <%= f.text_area :inscription %></div>
		
		<div>
		<label for="location">Street Address: </label>
		<input id="location">
		</div>
				
		<div class="ui-widget">
			<label for="area">City/Town: </label>
			<input id="area">
		</div>

		<div>
			<%= f.label :country %>
			<%= f.collection_select :country, @countries, :id, :name %>
		</div>
		
			<%= hidden_field_tag :area_id %>
			<%= hidden_field_tag :country_id %>
		
		<h2>About you</h2>

		<%= f.fields_for :user do |g| %>
			<p>
				<%= g.label :name %>
				<%= g.text_field :name %>
			</p>

			<p>
				<%= g.label :email %>
				<%= g.text_field :email %>
			</p>
			
		<% end %>
		<%= f.submit "Save" %>

	<% end %>

<% else %>
	<p>First, let's just make sure it's not already in our database. Who or what is it about?</p>

	<%= form_tag("/search", :method => "get") do %>
	  <%= label_tag(:phrase, "Search: ") %>
	  <%= text_field_tag(:phrase) %>
		<%= hidden_field_tag(:from, :submission)%>
	  <%= submit_tag("Go", :name => nil) %>
	<% end %>
<% end %>